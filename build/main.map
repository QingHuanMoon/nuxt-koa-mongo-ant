{"version":3,"sources":["webpack:///webpack/bootstrap 38a25cecdd24b2f1d47b","webpack:///external \"mongoose\"","webpack:///external \"koa-router\"","webpack:///./server/index.js","webpack:///external \"koa\"","webpack:///external \"koa-body\"","webpack:///external \"koa-jwt\"","webpack:///external \"nuxt\"","webpack:///./server/bootstrap.js","webpack:///./server/provider \\.js$","webpack:///./server/provider/db.js","webpack:///./public/config/index.js","webpack:///./server/router \\.js$","webpack:///./server/router/index.js","webpack:///./server/router/user.js","webpack:///./server/controller/UserController.js","webpack:///./server/service/UserService.js","webpack:///./server/repository/UserRepo.js","webpack:///./server/model/userSchema.js","webpack:///./utils/tools.js","webpack:///./utils/log4.js","webpack:///external \"log4js\"","webpack:///external \"jsonwebtoken\"","webpack:///./nuxt.config.js"],"names":["start","app","Koa","host","process","env","HOST","port","PORT","config","require","dev","nuxt","Nuxt","builder","Builder","build","use","koaBody","KoaJwt","secret","unless","path","on","err","ctx","console","log","BootStrap","RouterRegister","status","respond","req","render","res","listen","ProviderRegister","requireComponent","keys","forEach","fileName","componentConfig","default","boot","routes","allowedMethods","Db","mongoose","connect","dbURL","useNewUrlParser","useUnifiedTopology","db","connection","EnvConfig","development","baseApi","mockApi","test","production","mock","namespace","router","Router","prefix","get","next","title","body","post","UserController","login","check","params","request","UserService","loginByEmailAndPassword","form","timestamp","Date","getTime","data","_doc","token","jwt","sign","expiresIn","tools","success","fail","UserRepo","findUser","userSchema","findOne","UserSchema","Schema","userId","type","Number","userName","String","password","email","mobile","sex","deptId","job","state","role","createdTime","now","lastLoginTime","remark","model","CODE","SUCCESS","PARAM_ERROR","USER_ACCOUNT_ERROR","USER_LOGIN_ERROR","BUSSINESS_ERROR","AUTH_ERROR","paper","pageNumber","pageSize","skipIndex","page","msg","code","log4js","info","levels","TRACE","DEBUG","INFO","WARN","ERROR","FATAL","configure","appenders","filename","error","pattern","alwaysIncludePattern","categories","level","debug","content","logger","getLogger","module","exports","telemetry","head","meta","charset","name","hid","link","rel","href","css","loading","color","plugins","src","ssr","extend","resolve","alias","Client","rules","push","enforce","loader","exclude"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 38a25cecdd24b2f1d47b","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 1\n// module chunks = 0","import Koa from 'koa'\nimport koaBody from 'koa-body';\nimport KoaJwt from 'koa-jwt';\nimport { Nuxt, Builder } from 'nuxt'\nimport BootStrap from './bootstrap';\n\n\nasync function start () {\n  const app = new Koa()\n  const host = process.env.HOST || '127.0.0.1'\n  const port = process.env.PORT || 3000\n\n  // Import and Set Nuxt.js options\n  const config = require('../nuxt.config.js')\n  config.dev = !(app.env === 'production')\n\n  // Instantiate nuxt.js\n  const nuxt = new Nuxt(config)\n\n  // Build in development\n  if (config.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  }\n\n  app.use(koaBody())\n  app.use(KoaJwt({ secret: 'qinghuan' }).unless({\n    path: [\n      '/login',\n      /^\\/_nuxt/,\n      /^\\/__webpack_hmr/,\n      '/favicon.ico'\n    ]\n  }))\n\n\n\n  app.on('error', (err, ctx) => {\n    console.log(ctx)\n  })\n\n  // 路由\n  BootStrap.RouterRegister(app)\n\n\n  app.use(ctx => {\n    ctx.status = 200\n    ctx.respond = false // Mark request as handled for Koa\n    ctx.req.ctx = ctx // This might be useful later on, e.g. in nuxtServerInit or with nuxt-stash\n    nuxt.render(ctx.req, ctx.res)\n  })\n\n\n  app.listen(port, host)\n\n\n  console.log('服务器启动成功,请点击访问->' + host + ':' + port) // eslint-disable-line no-console\n\n  BootStrap.ProviderRegister()\n\n}\n\nstart()\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"koa-body\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-body\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"koa-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-jwt\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 6\n// module chunks = 0","class BootStrap\n{\n  // 服务自动注册\n  static ProviderRegister()\n  {\n    const requireComponent = require.context('./provider', true, /\\.js$/)\n      requireComponent.keys().forEach((fileName) => {\n        const componentConfig = requireComponent(fileName)\n        componentConfig.default.boot()\n      })\n  }\n\n  // 路由自动注册\n  static RouterRegister(app)\n  {\n    const requireComponent = require.context('./router', true, /\\.js$/)\n    requireComponent.keys().forEach((fileName) => {\n      const componentConfig = requireComponent(fileName)\n      app.use(componentConfig.default.routes(), componentConfig.default.allowedMethods())\n    })\n  }\n}\n\nexport default BootStrap\n\n\n\n// WEBPACK FOOTER //\n// ./server/bootstrap.js","var map = {\n\t\"./db.js\": 9\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 8;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/provider \\.js$\n// module id = 8\n// module chunks = 0","import mongoose from 'mongoose'\nimport config from '../../public/config'\nclass Db\n{\n  static boot()\n  {\n    mongoose.connect(config.dbURL, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    }\n    )\n    const db = mongoose.connection\n\n    db.on('error', () => {\n      console.log('数据库服务注册失败')\n    })\n\n    db.on('open', () => {\n      console.log('数据库服务注册成功')\n    })\n  }\n}\n\nexport default Db\n\n\n\n// WEBPACK FOOTER //\n// ./server/provider/db.js","\nconst env = process.env.NODE_ENV || 'production'\nconst EnvConfig = {\n    development: {\n        baseApi: '/api',\n        mockApi: 'https://www.fastmock.site/mock/7ea61bf9aaadb56d4a3bf48c47c91e76/api',\n        dbURL: 'mongodb://127.0.0.1:27017/nuxt'\n    },\n    test: {\n        baseApi: '//test.vite.app/api',\n        mockApi: 'https://www.fastmock.site/mock/7ea61bf9aaadb56d4a3bf48c47c91e76/api',\n        dbURL: 'mongodb://127.0.0.1:27017/nuxt'\n    },\n    production: {\n        baseApi: '//prod.vite.app/api',\n        mockApi: '',\n        dbURL: 'mongodb://127.0.0.1:27017/nuxt'\n    }\n}\nexport default {\n    env,\n    mock: true,\n    namespace: 'nuxt',\n    ...EnvConfig[env]\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/config/index.js","var map = {\n\t\"./index.js\": 12,\n\t\"./user.js\": 13\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 11;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/router \\.js$\n// module id = 11\n// module chunks = 0","import Router from 'koa-router'\n\nconst router = new Router()\n\nrouter.prefix('/api')\n\nrouter.get('/', async (ctx, next) => {\n  await ctx.render('index', {\n    title: 'Hello Koa 2!'\n  })\n})\n\nrouter.get('/hello', async (ctx, next) => {\n  ctx.body = {\n    title: 'koa2 json'\n  }\n})\n\nrouter.get('/json', async (ctx, next) => {\n  ctx.body = {\n    title: 'koa2 json'\n  }\n})\n\nexport default router\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/router/index.js","import Router from 'koa-router'\nimport UserController from '../controller/UserController'\n\nconst router = new Router()\n\nrouter.prefix('/api/users')\n\n\nrouter.post('/login', UserController.login)\nrouter.get('/check', UserController.check)\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/router/user.js","import UserService from \"../service/UserService\"\nimport tools from '../../utils/tools'\nimport jwt from 'jsonwebtoken'\nclass UserController\n{\n  static async login(ctx, next) {\n    let params = ctx.request.body\n    let res = await UserService.loginByEmailAndPassword(params.form)\n    if (res) {\n      let timestamp = new Date().getTime()\n      let data = res._doc\n      const token = jwt.sign({\n        data: {...data, timestamp},\n      }, 'qinghuan', { expiresIn: 60 })\n      return ctx.body = tools.success('登录成功', {...data, token, timestamp})\n    } else {\n      return ctx.body = tools.fail('登录失败')\n    }\n  }\n\n  static async check(ctx, next) {\n    return ctx.body = 'check'\n  }\n}\n\nexport default UserController\n\n\n\n// WEBPACK FOOTER //\n// ./server/controller/UserController.js","import UserRepo from \"../repository/UserRepo\";\n\nclass UserService\n{\n  static async loginByEmailAndPassword(params)\n  {\n    return await UserRepo.findUser(params)\n  }\n}\n\nexport default UserService\n\n\n\n// WEBPACK FOOTER //\n// ./server/service/UserService.js","import userSchema from \"../model/userSchema\";\nclass UserRepo\n{\n  static async findUser(params)\n  {\n    let res = await userSchema.findOne(params)\n    return res\n  }\n}\n\n\nexport default UserRepo\n\n\n\n// WEBPACK FOOTER //\n// ./server/repository/UserRepo.js","import mongoose from 'mongoose'\n\nconst UserSchema = mongoose.Schema({\n  userId: {\n    type: Number,\n  },\n  userName: {\n    type: String\n  },\n  password: {\n    type: String\n  },\n  email: {\n    type: String\n  },\n  mobile: {\n    type: String\n  },\n  sex: {\n    type: Number\n  },\n  deptId: [],\n  job: String,\n  state: {\n    type: Number,\n    default: 1,\n  },\n  role: {\n    type: Number,\n    default: 1\n  },\n  createdTime: {\n    type: Date,\n    default: Date.now()\n  },\n  lastLoginTime: {\n    type: Date,\n    default: Date.now()\n  },\n  remark: String\n})\n\nexport default mongoose.model('users', UserSchema, 'users')\n\n\n\n// WEBPACK FOOTER //\n// ./server/model/userSchema.js","import log4js from '../utils/log4';\nconst CODE = {\n  SUCCESS: 200,\n  PARAM_ERROR: 10001,\n  USER_ACCOUNT_ERROR: 20001,\n  USER_LOGIN_ERROR: 30001,\n  BUSSINESS_ERROR: 40001,\n  AUTH_ERROR: 50001,\n}\n\nconst paper = (pageNumber = 1, pageSize = 10) => {\n  pageNumber *= 1\n  pageSize *= 1\n  const skipIndex = (pageNumber - 1) * pageSize\n  return {\n    page: {\n      pageNumber,\n      pageSize\n    },\n    skipIndex\n  }\n}\n\nconst success = (msg = '', data = '', code = CODE.SUCCESS) => {\n  log4js.info(data)\n  return {\n    code, data, msg\n  }\n}\n\nconst fail = (msg = '', data = '', code = CODE.BUSSINESS_ERROR) => {\n  log4js.info(msg)\n  return {\n    code, data, msg\n  }\n}\n\nexport default {\n  paper, success, fail\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./utils/tools.js","/**\n * 日志存储\n */\nimport log4js from 'log4js'\n\nconst levels = {\n    'trace': log4js.levels.TRACE,\n    'debug': log4js.levels.DEBUG,\n    'info': log4js.levels.INFO,\n    'warn': log4js.levels.WARN,\n    'error': log4js.levels.ERROR,\n    'fatal': log4js.levels.FATAL\n}\n\nlog4js.configure({\n    appenders: {\n        console: { type: 'console' },\n        info: { type: 'file', filename: 'logs/all-logs.log' },\n        error: {\n            type: 'dataFile',\n            filename: 'logs/log',\n            pattern: 'yyyy-MM-dd.log',\n            alwaysIncludePattern: true,\n        }\n    },\n    categories: {\n        default: { appenders: ['console'], level: 'debug' },\n        error: {\n            appenders: ['console'], level: 'error'\n        }\n    }\n})\n\n\n/**\n * debug信息的日志输出,debug级别\n * @param {string} content\n */\nconst debug = (content) => {\n    let logger = log4js.getLogger()\n    logger.level = levels.debug\n    logger.debug(content)\n}\n\n/**\n * debug信息的日志输出,error级别\n * @param {string} content\n */\nconst error = (content) => {\n    let logger = log4js.getLogger()\n    logger.level = levels.error\n    logger.error(content)\n}\n\n/**\n * debug信息的日志输出,info级别\n * @param {string} content\n */\nconst info = (content) => {\n    let logger = log4js.getLogger()\n    logger.level = levels.info\n    logger.info(content)\n}\n\nexport default {\n  debug, error, info\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/log4.js","module.exports = require(\"log4js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"log4js\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 21\n// module chunks = 0","module.exports = {\n  telemetry: false,\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'starter',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\n    ]\n  },\n  /*\n  ** Global CSS\n  */\n  css: ['~assets/css/main.css'],\n  /*\n  ** Customize the progress-bar color\n  */\n  loading: { color: '#3B8070' },\n  /*\n   ** Build configuration\n   */\n  plugins: [\n    '~plugins/antd.js',\n    '~plugins/request.js',\n    '~plugins/autoload.js',\n    {src: '~plugins/form-create.js', ssr:false},\n    {src: '~plugins/lodash.js', ssr: false},\n\n  ],\n\n  build: {\n    /*\n     ** Run ESLINT on save\n     */\n    extend(config, ctx) {\n      config.resolve.alias['vue$'] = 'vue/dist/vue.esm.js'\n      if (ctx.Client) {\n        config.module.rules.push({\n          enforce: 'pre',\n          test: /\\.(js|vue)$/,\n          loader: 'eslint-loader',\n          exclude: /(node_modules)/\n        })\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js"],"sourceRoot":""}